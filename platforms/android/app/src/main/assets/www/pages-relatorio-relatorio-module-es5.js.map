{"version":3,"sources":["./src/app/pages/relatorio/relatorio.page.html","./src/app/pages/relatorio/relatorio.module.ts","./src/app/pages/relatorio/relatorio.page.scss","./src/app/pages/relatorio/relatorio.page.ts","./src/app/services/contribuintes.service.ts"],"names":[],"mappings":"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","file":"pages-relatorio-relatorio-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n    <ion-toolbar color=\\\"dark\\\">\\r\\n        <ion-button class=\\\"buttonPrint\\\" slot=\\\"end\\\" fill=\\\"clear\\\" (click)=\\\"Imprimir()\\\">\\r\\n            <ion-icon name=\\\"print\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button defaultHref=\\\"/\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>Relatórios</ion-title>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content color=\\\"light\\\">\\r\\n    <ion-grid>\\r\\n        <ion-row>\\r\\n            <ion-col>\\r\\n\\r\\n                <ion-list *ngIf=\\\"objResumo\\\">\\r\\n                    <ion-toolbar class=\\\"SizeToolbar\\\" text-center color=\\\"success\\\">\\r\\n                        <ion-label class=\\\"LabelPeriodo\\\">Período</ion-label>\\r\\n                        <ion-button color=\\\"dark\\\" class=\\\"calendarStart\\\" slot=\\\"start\\\" fill=\\\"clear\\\">De\\r\\n                            <ion-icon name=\\\"calendar\\\"></ion-icon>\\r\\n                            <ion-datetime class=\\\"dateTime-1\\\" cancelText=\\\"Cancelar\\\" done-text=\\\"Ok\\\" (ionChange)=\\\"carregarDtInicio( $event )\\\" [ngModel]=\\\"dtStart.toISOString()\\\" display-format=\\\"DD/MM/YYYY\\\"></ion-datetime>\\r\\n                        </ion-button>\\r\\n\\r\\n                        <ion-button color=\\\"dark\\\" class=\\\"calendarEnd\\\" slot=\\\"start\\\" fill=\\\"clear\\\">Até\\r\\n                            <ion-icon name=\\\"calendar\\\"></ion-icon>\\r\\n                            <ion-datetime class=\\\"dateTime-2\\\" cancelText=\\\"Cancelar\\\" done-text=\\\"Ok\\\" (ionChange)=\\\"carregarDtFim( $event )\\\" [ngModel]=\\\"dtEnd.toISOString()\\\" display-format=\\\"DD/MM/YYYY\\\"></ion-datetime>\\r\\n                        </ion-button>\\r\\n                    </ion-toolbar>\\r\\n\\r\\n                    <ion-button class=\\\"ButtonPorCidade\\\" expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"mostrarPop( $event )\\\" color=\\\"success\\\">\\r\\n                        <b>Ver Por Cidade</b>\\r\\n                    </ion-button>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n                    <ion-card color=\\\"light\\\">\\r\\n                        <!-- Lista de contabilização por período. -->\\r\\n                        <ion-item color=\\\"medium\\\">\\r\\n                            <ion-label><b>Recebidos (Hoje):</b> {{ objResumo.qtdRecebido }}</ion-label>\\r\\n                        </ion-item>\\r\\n                        <ion-item color=\\\"light\\\">\\r\\n                            <ion-label><b>Trabalhadas:</b> {{ objResumo.trabalhadas }}</ion-label>\\r\\n                        </ion-item>\\r\\n                        <ion-item color=\\\"light\\\">\\r\\n                            <ion-label><b>A Receber:</b> {{ objResumo.valorEmAberto | currency: 'BRL':true }}</ion-label>\\r\\n                        </ion-item>\\r\\n                        <ion-item color=\\\"light\\\">\\r\\n                            <ion-label color=\\\"medium\\\"><b>Em Aberto:</b> {{ objResumo.qtdEmAberto }}</ion-label>\\r\\n                        </ion-item>\\r\\n                        <ion-item color=\\\"light\\\">\\r\\n                            <ion-label color=\\\"success\\\"><b>Recebidas:</b> {{ objResumo.qtdRecebido }}</ion-label>\\r\\n                        </ion-item>\\r\\n                        <ion-item color=\\\"light\\\">\\r\\n                            <ion-label color=\\\"danger\\\"><b>Devolvidas:</b> {{ objResumo.qtdDevolvido }}</ion-label>\\r\\n                        </ion-item>\\r\\n                        <ion-item color=\\\"light\\\">\\r\\n                            <ion-label color=\\\"danger\\\"><b>Canceladas:</b> {{ objResumo.qtdCancelado }}</ion-label>\\r\\n                        </ion-item>\\r\\n                        <br>\\r\\n                    </ion-card>\\r\\n                </ion-list>\\r\\n\\r\\n            </ion-col>\\r\\n        </ion-row>\\r\\n    </ion-grid>\\r\\n\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RelatorioPage } from './relatorio.page';\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { PopinfoComponent } from '../../components/popresumo/popinfo.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RelatorioPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  entryComponents: [\r\n    PopinfoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ComponentsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [RelatorioPage]\r\n})\r\nexport class RelatorioPageModule {}\r\n","module.exports = \".buttonPrint {\\n  --color-activated: #3880ff !important;\\n  color: #10dc60;\\n}\\n\\n.calendarStart {\\n  position: fixed;\\n  top: 25px;\\n  right: 50%;\\n  --ripple-color: #192035 !important;\\n}\\n\\n.calendarEnd {\\n  position: fixed;\\n  top: 25px;\\n  left: 50%;\\n  --ripple-color: #192035 !important;\\n}\\n\\n.itemCalendar {\\n  --inner-padding-bottom: 5% !important;\\n}\\n\\n.sizeLabel {\\n  font-size: 20px;\\n}\\n\\n.ListPorCidade {\\n  --background: none;\\n  background-color: #d7d8da !important;\\n}\\n\\n.LabelPeriodo {\\n  margin-bottom: 15% !important;\\n}\\n\\n.SizeToolbar {\\n  height: 70px;\\n}\\n\\n.ButtonPorCidade {\\n  --border-radius: 10px !important;\\n}\\n\\n.loadingClass {\\n  --background: none;\\n  --background-color: #192035 !important;\\n  --spinner-color: #0ef366 !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVsYXRvcmlvL0M6XFx0ZW1wXFx3cy1pb25pY1xcWEV4cHJlc3NBcHAvc3JjXFxhcHBcXHBhZ2VzXFxyZWxhdG9yaW9cXHJlbGF0b3Jpby5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3JlbGF0b3Jpby9yZWxhdG9yaW8ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0kscUNBQUE7RUFDQSxjQUFBO0FDQ0o7O0FERUE7RUFDSSxlQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxrQ0FBQTtBQ0NKOztBREVBO0VBQ0ksZUFBQTtFQUNBLFNBQUE7RUFDQSxTQUFBO0VBQ0Esa0NBQUE7QUNDSjs7QURFQTtFQUNJLHFDQUFBO0FDQ0o7O0FERUE7RUFDSSxlQUFBO0FDQ0o7O0FERUE7RUFDSSxrQkFBQTtFQUNBLG9DQUFBO0FDQ0o7O0FERUE7RUFDSSw2QkFBQTtBQ0NKOztBREVBO0VBQ0ksWUFBQTtBQ0NKOztBREVBO0VBQ0ksZ0NBQUE7QUNDSjs7QURFQTtFQUNJLGtCQUFBO0VBQ0Esc0NBQUE7RUFDQSxtQ0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcmVsYXRvcmlvL3JlbGF0b3Jpby5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnV0dG9uUHJpbnQge1xyXG4gICAgLS1jb2xvci1hY3RpdmF0ZWQ6ICMzODgwZmYgIWltcG9ydGFudDtcclxuICAgIGNvbG9yOiAjMTBkYzYwO1xyXG59XHJcblxyXG4uY2FsZW5kYXJTdGFydCB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICB0b3A6IDI1cHg7XHJcbiAgICByaWdodDogNTAlO1xyXG4gICAgLS1yaXBwbGUtY29sb3I6ICMxOTIwMzUgIWltcG9ydGFudDtcclxufVxyXG5cclxuLmNhbGVuZGFyRW5kIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIHRvcDogMjVweDtcclxuICAgIGxlZnQ6IDUwJTtcclxuICAgIC0tcmlwcGxlLWNvbG9yOiAjMTkyMDM1ICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5pdGVtQ2FsZW5kYXIge1xyXG4gICAgLS1pbm5lci1wYWRkaW5nLWJvdHRvbTogNSUgIWltcG9ydGFudDtcclxufVxyXG5cclxuLnNpemVMYWJlbCB7XHJcbiAgICBmb250LXNpemU6IDIwcHg7XHJcbn1cclxuXHJcbi5MaXN0UG9yQ2lkYWRlIHtcclxuICAgIC0tYmFja2dyb3VuZDogbm9uZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNkN2Q4ZGEgIWltcG9ydGFudDtcclxufVxyXG5cclxuLkxhYmVsUGVyaW9kbyB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNSUgIWltcG9ydGFudDtcclxufVxyXG5cclxuLlNpemVUb29sYmFyIHtcclxuICAgIGhlaWdodDogNzBweDtcclxufVxyXG5cclxuLkJ1dHRvblBvckNpZGFkZSB7XHJcbiAgICAtLWJvcmRlci1yYWRpdXM6IDEwcHggIWltcG9ydGFudDtcclxufVxyXG5cclxuLmxvYWRpbmdDbGFzcyB7XHJcbiAgICAtLWJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICAtLWJhY2tncm91bmQtY29sb3I6ICMxOTIwMzUgIWltcG9ydGFudDtcclxuICAgIC0tc3Bpbm5lci1jb2xvcjogIzBlZjM2NiAhaW1wb3J0YW50O1xyXG59IiwiLmJ1dHRvblByaW50IHtcbiAgLS1jb2xvci1hY3RpdmF0ZWQ6ICMzODgwZmYgIWltcG9ydGFudDtcbiAgY29sb3I6ICMxMGRjNjA7XG59XG5cbi5jYWxlbmRhclN0YXJ0IHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDI1cHg7XG4gIHJpZ2h0OiA1MCU7XG4gIC0tcmlwcGxlLWNvbG9yOiAjMTkyMDM1ICFpbXBvcnRhbnQ7XG59XG5cbi5jYWxlbmRhckVuZCB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAyNXB4O1xuICBsZWZ0OiA1MCU7XG4gIC0tcmlwcGxlLWNvbG9yOiAjMTkyMDM1ICFpbXBvcnRhbnQ7XG59XG5cbi5pdGVtQ2FsZW5kYXIge1xuICAtLWlubmVyLXBhZGRpbmctYm90dG9tOiA1JSAhaW1wb3J0YW50O1xufVxuXG4uc2l6ZUxhYmVsIHtcbiAgZm9udC1zaXplOiAyMHB4O1xufVxuXG4uTGlzdFBvckNpZGFkZSB7XG4gIC0tYmFja2dyb3VuZDogbm9uZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Q3ZDhkYSAhaW1wb3J0YW50O1xufVxuXG4uTGFiZWxQZXJpb2RvIHtcbiAgbWFyZ2luLWJvdHRvbTogMTUlICFpbXBvcnRhbnQ7XG59XG5cbi5TaXplVG9vbGJhciB7XG4gIGhlaWdodDogNzBweDtcbn1cblxuLkJ1dHRvblBvckNpZGFkZSB7XG4gIC0tYm9yZGVyLXJhZGl1czogMTBweCAhaW1wb3J0YW50O1xufVxuXG4ubG9hZGluZ0NsYXNzIHtcbiAgLS1iYWNrZ3JvdW5kOiBub25lO1xuICAtLWJhY2tncm91bmQtY29sb3I6ICMxOTIwMzUgIWltcG9ydGFudDtcbiAgLS1zcGlubmVyLWNvbG9yOiAjMGVmMzY2ICFpbXBvcnRhbnQ7XG59Il19 */\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { BluetoothSerial } from '@ionic-native/bluetooth-serial/ngx';\r\nimport { ContribuintesService } from '../../services/contribuintes.service';\r\nimport { DatePipe } from '@angular/common';\r\nimport { StorageService } from '../../services/storage.service';\r\nimport { LoadingController, PopoverController, ToastController } from '@ionic/angular';\r\nimport { PopinfoComponent } from '../../components/popresumo/popinfo.component';\r\nimport { UsuarioService } from '../../services/usuario.service';\r\nimport { UsuarioDTO } from '../../interfaces/usuario.dto';\r\nimport { Resumo } from '../../interfaces/resumo';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-relatorio',\r\n  templateUrl: './relatorio.page.html',\r\n  styleUrls: ['./relatorio.page.scss'],\r\n})\r\nexport class RelatorioPage implements OnInit {\r\n\r\n  @Input() objResumo: Resumo;\r\n\r\n  dtStart: Date = new Date();\r\n  dtEnd: Date = new Date(this.dtStart.getFullYear(), this.dtStart.getMonth() + 1, 0);\r\n  dtInicio: string = \" \";\r\n  dtFim: string = \" \";\r\n  usuario: UsuarioDTO;\r\n  codMens: number;\r\n\r\n  constructor( private bluetoothSerial: BluetoothSerial,\r\n               private contribService: ContribuintesService,\r\n               private datePipe: DatePipe,\r\n               private popoverCtrl: PopoverController,\r\n               private loadingController: LoadingController,\r\n               private toastCtrl: ToastController,\r\n               private usuarioService: UsuarioService,\r\n               private storage: StorageService) { }\r\n\r\n\r\n  ngOnInit() {\r\n    this.carregarResumo();\r\n  }\r\n\r\n  // Método para carregar a contabilização por período após a seleção da data início e fim.\r\n  // Carrega também os recibos por cidade através do mesmo seletor de data.\r\n  async carregarPeriodo() {\r\n    await this.carregarResumo();\r\n  }\r\n\r\n  // Carrega o objeto de resumo do mensageiro.\r\n  async carregarResumo() {\r\n    let loading = await this.presentLoading();\r\n    let localUser = this.storage.getLocalUser();\r\n    if (localUser && localUser.email) {\r\n      this.usuarioService.findByEmail(localUser.email)\r\n        .subscribe(resp => {\r\n          this.usuario = resp;\r\n          this.codMens = this.usuario.codmensageiro;\r\n        \r\n\r\n          this.contribService.getResumo(this.codMens, this.dtInicio, this.dtFim)\r\n            .subscribe(resp => {\r\n              this.objResumo = resp;\r\n              this.objResumo.trabalhadas = this.objResumo.qtdRecebido + this.objResumo.qtdCancelado + this.objResumo.qtdDevolvido;\r\n              console.log('OBJ RESUMO: ', this.objResumo);\r\n              loading.dismiss();\r\n            }, error => {\r\n              console.log(error);\r\n              loading.dismiss();\r\n            });\r\n          \r\n        }, error => {\r\n          if (error.status == 403) {\r\n            console.log(error.status);\r\n          }\r\n      });\r\n    } \r\n  }\r\n\r\n\r\n  // Mostrando mensagens de confirmação no Toast\r\n  async presentToast( message: string ) {\r\n    const toast = await this.toastCtrl.create({\r\n      message,\r\n      duration: 2000,\r\n      mode: \"ios\",\r\n      color: \"dark\"\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  // Imprime as informações relacionadas na impressora.\r\n  Imprimir() {\r\n    this.conversorDate();\r\n    \r\n    this.bluetoothSerial.write(\r\n      '\\n\\n\\n' + '      *** RELATORIO ***' + '\\n\\n' +\r\n      'Mensageiro:\\n' +\r\n       this.objResumo.mensageiro + '\\n\\n' +\r\n      'Contabilizando o Periodo:\\n' + 'DE ' + this.dtInicio + ' A ' + this.dtFim + '\\n\\n' +\r\n      'HOSPITAL DO CANCER EM UBERLANDIA\\n\\n\\n' +\r\n      'RESUMO\\n' +\r\n      'Trabalhadas: ' + this.objResumo.totalQtd + '\\n\\n' +\r\n      'A Receber: R$' + this.objResumo.valorEmAberto.toFixed(2) + '\\n\\n' +\r\n      'Recebidas: ' + this.objResumo.qtdRecebido + '\\n\\n' +\r\n      'Devolvidas: '+ this.objResumo.qtdDevolvido + '\\n\\n' +\r\n      'Canceladas: '+ this.objResumo.qtdCancelado + '\\n\\n\\n\\n'\r\n      );\r\n      console.log('Imprimindo');\r\n    }\r\n\r\n  // converte datas\r\n  conversorDate(): void {\r\n   this.dtInicio = this.datePipe.transform(this.dtStart,\"dd/MM/yyyy\");\r\n   this.dtFim = this.datePipe.transform(this.dtEnd,\"dd/MM/yyyy\");\r\n  }\r\n\r\n  // Carrega e transforma a data inicio\r\n  carregarDtInicio(event){\r\n    this.dtInicio = this.datePipe.transform(new Date( event.detail.value ),\"yyyy-MM-dd\");\r\n    console.log('Data Inicio ' + this.dtInicio);\r\n  }\r\n\r\n  // Carrega e tranforma a data fim\r\n  carregarDtFim(event){\r\n    this.dtFim = this.datePipe.transform(new Date( event.detail.value ),\"yyyy-MM-dd\");\r\n    console.log('Data Fim ' + this.dtFim);\r\n\r\n    this.carregarPeriodo();\r\n  }\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      cssClass: 'loadingClass',\r\n      message: 'Carregando...',\r\n      animated: true,\r\n      spinner: 'circles',\r\n      translucent: true\r\n    });\r\n    loading.present();\r\n    return loading;\r\n\r\n    //const { role, data } = await loading.onDidDismiss();\r\n  }\r\n\r\n  // Mostra o resumo por cidade da página relatorio\r\n  async mostrarPop( evento ) {\r\n    const popover = await this.popoverCtrl.create({\r\n      component: PopinfoComponent,\r\n      event: evento,\r\n      mode: 'ios',\r\n      translucent: true,\r\n      animated: true\r\n    });\r\n    await popover.present();\r\n  }\r\n\r\n}\r\n","import { environment } from './../../environments/environment.prod';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Resumo } from '../interfaces/resumo';\r\nimport { ResumoPorCidade } from '../interfaces/resumoPorCidade';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Recibos } from '../class/recibos';\r\nimport { Devolvidos } from '../Class/devolvidos';\r\n\r\nconst URL = environment.url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ContribuintesService {\r\n\r\n  dtInicio:string;\r\n  dtFim:string;\r\n\r\n  \r\n  constructor( private http: HttpClient, private route: ActivatedRoute, private router: Router ) { }\r\n\r\n  \r\n  // Pega as informações de recibos dos contribuintes no WebServices. \r\n  getListaRecibos(cod: number, bairro: string) {\r\n    // http://192.168.0.243:8081/recibos/listarecibosapp?cod=315&startDate=2019-07-01&endDate=2019-07-31\r\n    return this.http.get<Recibos[]>(`${ URL }/recibos/listarecibosapp?cod=${ cod }&startDate=2021-03-01&endDate=2021-03-31&bairro=${ bairro }`);\r\n  }\r\n  // Detalhes do recibo.\r\n  getRecibosDetalhe( nrorecibo: number ) {\r\n    // http://192.168.0.243:8081/recibos/app/11382872\r\n    return this.http.get<Recibos>(`${ URL }/recibos/app/${ nrorecibo }`);\r\n  }\r\n  // Pega as informações de resumo do mensageiro no WebServices.\r\n  getResumo(cod: number, dtStart: string, dtEnd: string) {\r\n    this.dtInicio = dtStart;\r\n    this.dtFim = dtEnd;\r\n    // http://192.168.0.243:8081/recibos/resumomensageiro?cod=11&startDate=2017-01-01&endDate=2018-01-01\r\n    return this.http.get<Resumo>(`${ URL }/recibos/resumomensageiro?cod=${ cod }&startDate=${ dtStart }&endDate=${ dtEnd }`);\r\n  }\r\n  // Pega as informações de resumo do mensageiro por cidade.\r\n  getResumoPorCidade(cod: number) {\r\n    // http://192.168.0.243:8081/recibos/mensageiroporcidade1?cod=630&startDate=2019-01-01&endDate=2019-03-10\r\n    return this.http.get<ResumoPorCidade>(`${ URL }/recibos/mensageiroporcidade1?cod=${ cod }&startDate=${ this.dtInicio }&endDate=${ this.dtFim }`);\r\n  }\r\n  // Atualiza os recibos no BD\r\n  putRecibo( recibo: Recibos ) {\r\n    // http://localhost:8081/recibos/11369854\r\n    return this.http.put<Recibos>(`${ URL }/recibos/${ recibo.nrorecibo }`, recibo, {\r\n      headers: new HttpHeaders ({\r\n        'Content-Type': 'application/json' \r\n      })\r\n    });\r\n  }\r\n  // Cria recibos devolvidos\r\n  postDevolvidos( devolvido: Devolvidos ) {\r\n    // http://192.168.0.243:8081/devolvido/17044484\r\n    return this.http.post<Devolvidos>(`${ URL }/devolvido`, devolvido, {\r\n      headers: new HttpHeaders ({\r\n        'Content-Type': 'application/json'\r\n      })\r\n    });\r\n  }\r\n\r\n\r\n}\r\n"],"sourceRoot":""}