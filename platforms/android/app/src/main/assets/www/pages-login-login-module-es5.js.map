{"version":3,"sources":["./src/app/pages/login/login.page.html","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.scss","./src/app/pages/login/login.page.ts","./src/app/services/ui-service.service.ts","./src/app/services/usuario.service.ts"],"names":[],"mappings":";;;;;;;;;AAAA,2iH;;;;;;;;;;;;;;;;;;;;;;;ACAyC;AACM;AACF;AACU;AAEV;AAEJ;AAC6B;AAEtE,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,qDAAS;KACrB;CACF,CAAC;AAYF;IAAA;IAA8B,CAAC;IAAlB,eAAe;QAV3B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,8EAAgB;gBAChB,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,qDAAS,CAAC;SAC1B,CAAC;OACW,eAAe,CAAG;IAAD,sBAAC;CAAA;AAAH;;;;;;;;;;;;AC3B5B,oDAAoD,gBAAgB,iBAAiB,GAAG,SAAS,iBAAiB,GAAG,kBAAkB,gBAAgB,iBAAiB,GAAG,+BAA+B,4CAA4C,oCAAoC,0BAA0B,GAAG,6CAA6C,+uC;;;;;;;;;;;;;;;;;;;;ACAvS;AACH;AAEM;AACK;AAQrE;IA2BE,mBAAqB,cAA8B,EAC9B,OAAsB,EACtB,SAA2B;QAF3B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAkB;QAxBhD,cAAS,GAAG;YACV,KAAK,EAAE,eAAe;YACtB,QAAQ,EAAE,SAAS;SACpB,CAAC;QAEF,iBAAY,GAAY;YACtB,KAAK,EAAE,MAAM;YACb,QAAQ,EAAE,SAAS;YACnB,IAAI,EAAE,MAAM;YACZ,MAAM,EAAE,UAAU;SACnB,CAAC;QAEF,eAAU,GAAQ,EAAC,cAAc,EAAE,KAAK,EAAC,CAAC;IAYW,CAAC;IAVtD,8BAAU,GAAV,UAAY,IAAa;QACvB,IAAG,IAAI,KAAK,IAAI,EAAE;YAChB,IAAI,CAAC,UAAU,GAAG,EAAC,cAAc,EAAE,IAAI,EAAC,CAAC;SAC1C;aAAM;YACL,IAAI,CAAC,UAAU,GAAG,EAAC,cAAc,EAAE,KAAK,EAAC,CAAC;SAC3C;IACH,CAAC;IAOD,4BAAQ,GAAR;IAEA,CAAC;IAED,yBAAK,GAAL;QACE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,gBAAgB,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;IAChE,CAAC;IAGK,yBAAK,GAAX,UAAa,MAAc;;;;;;wBAEzB,IAAK,MAAM,CAAC,OAAO,EAAG;4BAAE,sBAAO;yBAAE;wBAElB,qBAAM,IAAI,CAAC,cAAc,CAAC,KAAK,CAAE,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAE;;wBAAzF,MAAM,GAAG,SAAgF;wBAE/F,IAAK,MAAM,EAAG;4BACZ,oBAAoB;4BACpB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAE,iBAAiB,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAE,CAAC;yBACpE;6BAAM;4BACL,8CAA8C;4BAC9C,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,0CAA0C,CAAC,CAAC;yBAC9E;;;;;KAEF;IAEK,4BAAQ,GAAd,UAAgB,SAAiB;;;;;;wBAE/B,IAAK,SAAS,CAAC,OAAO,EAAG;4BAAE,sBAAO;yBAAE;wBAErB,qBAAM,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAE,IAAI,CAAC,YAAY,CAAE;;wBAAhE,MAAM,GAAG,SAAuD;wBAEtE,IAAK,MAAM,EAAG;4BACZ,oBAAoB;4BACpB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAE,iBAAiB,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAE,CAAC;yBACpE;6BAAM;4BACL,8CAA8C;4BAC9C,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,CAAC;yBAC3D;;;;;KAEF;IAID,mCAAe,GAAf;QACE,IAAI,CAAC,UAAU,GAAG,EAAC,cAAc,EAAE,IAAI,EAAC,CAAC;QACzC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC;IAED,gCAAY,GAAZ;QACE,IAAI,CAAC,UAAU,GAAG,EAAC,cAAc,EAAE,IAAI,EAAC,CAAC;QACzC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAE3B,CAAC;;gBAzDsC,wEAAc;gBACrB,4DAAa;gBACX,6EAAgB;;IA3BF;QAA7C,+DAAS,CAAC,gBAAgB,EAAE,EAAC,MAAM,EAAE,KAAK,EAAC,CAAC;wEAAS,wDAAS;6CAAC;IAFrD,SAAS;QALrB,+DAAS,CAAC;YACT,QAAQ,EAAE,WAAW;YACrB,6IAAgC;;SAEjC,CAAC;+EA4BqC,wEAAc;YACrB,4DAAa;YACX,6EAAgB;OA7BrC,SAAS,CAsFrB;IAAD,gBAAC;CAAA;AAtFqB;;;;;;;;;;;;;;;;;;;ACZqB;AACuB;AAKlE;IAEE,0BAAqB,eAAgC,EAAU,eAAgC;QAA1E,oBAAe,GAAf,eAAe,CAAiB;QAAU,oBAAe,GAAf,eAAe,CAAiB;IAAK,CAAC;IAE/F,4CAAiB,GAAvB,UAAyB,OAAe;;;;;4BACxB,qBAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;4BAC9C,OAAO;4BACP,OAAO,EAAE,CAAC,IAAI,CAAC;yBAChB,CAAC;;wBAHI,KAAK,GAAG,SAGZ;wBAEF,qBAAM,KAAK,CAAC,OAAO,EAAE;;wBAArB,SAAqB,CAAC;;;;;KACvB;IAEK,uCAAY,GAAlB,UAAoB,OAAe;;;;;4BACnB,qBAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;4BAC9C,OAAO;4BACP,QAAQ,EAAE,KAAK;4BACf,QAAQ,EAAE,IAAI;yBACf,CAAC;;wBAJI,KAAK,GAAG,SAIZ;wBACF,KAAK,CAAC,OAAO,EAAE,CAAC;;;;;KACjB;;gBAlBqC,8DAAe;gBAA2B,8DAAe;;IAFpF,gBAAgB;QAH5B,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;+EAGsC,8DAAe,EAA2B,8DAAe;OAFpF,gBAAgB,CAsB5B;IAAD,uBAAC;CAAA;AAtB4B;;;;;;;;;;;;;;;;;;;;;;ACNc;AACoB;AAEF;AAEd;AAEN;AAGzC,IAAM,GAAG,GAAG,qEAAW,CAAC,GAAG,CAAC;AAM5B;IAKE,wBAAqB,IAAgB,EAAU,OAAgB,EAAU,OAAsB;QAA1E,SAAI,GAAJ,IAAI,CAAY;QAAU,YAAO,GAAP,OAAO,CAAS;QAAU,YAAO,GAAP,OAAO,CAAe;QAH/F,UAAK,GAAW,IAAI,CAAC;QACb,YAAO,GAAY,EAAE,CAAC;IAEuE,CAAC;IAEtG,8BAAK,GAAL,UAAO,KAAa,EAAE,QAAgB;QAAtC,iBAuBC;QArBC,IAAM,IAAI,GAAG,EAAE,KAAK,SAAE,QAAQ,YAAE,CAAC;QAEjC,OAAO,IAAI,OAAO,CAAE,iBAAO;YAEzB,KAAI,CAAC,IAAI,CAAC,IAAI,CAAK,GAAG,gBAAc,EAAE,IAAI,CAAC;iBACxC,SAAS,CAAE,UAAM,IAAI;;;;4BACpB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;iCAEb,IAAI,CAAC,IAAI,CAAC,EAAV,wBAAU;4BACb,qBAAM,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,OAAO,CAAC,CAAE;;4BAAxC,SAAwC,CAAC;4BACzC,OAAO,CAAC,IAAI,CAAC,CAAC;;;4BAEd,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;4BAClB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;4BACrB,OAAO,CAAC,KAAK,CAAC,CAAC;;;;;iBAGlB,CAAC,CAAC;QAEP,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,+BAAM,GAAN;QACE,IAAI,CAAC,KAAK,GAAK,IAAI,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;IAC1D,CAAC;IAED,iCAAQ,GAAR,UAAU,OAAgB;QAA1B,iBAsBC;QApBC,OAAO,IAAI,OAAO,CAAE,iBAAO;YAEzB,KAAI,CAAC,IAAI,CAAC,IAAI,CAAK,GAAG,iBAAe,EAAE,OAAO,CAAC;iBAC5C,SAAS,CAAE,UAAM,IAAI;;;;4BAEpB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;iCAEb,IAAI,CAAC,IAAI,CAAC,EAAV,wBAAU;4BACb,qBAAM,IAAI,CAAC,YAAY,CAAE,IAAI,CAAC,OAAO,CAAC,CAAE;;4BAAxC,SAAwC,CAAC;4BACzC,OAAO,CAAC,IAAI,CAAC,CAAC;;;4BAEd,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;4BAClB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;4BACrB,OAAO,CAAC,KAAK,CAAC,CAAC;;;;;iBAIlB,CAAC,CAAC;QAEP,CAAC,CAAC,CAAC;IACL,CAAC;IAED,mCAAU,GAAV;QAEE,IAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAG;YACvB,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;QAED,OAAO,mDAAK,IAAI,CAAC,OAAO,EAAG;IAE7B,CAAC;IAEK,qCAAY,GAAlB,UAAoB,KAAa;;;;;wBAE/B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;wBACnB,qBAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC;;wBAAtC,SAAsC,CAAC;wBAEvC,qBAAM,IAAI,CAAC,WAAW,EAAE;;wBAAxB,SAAwB,CAAC;;;;;KAE1B;IAEK,sCAAa,GAAnB;;;;;;wBAEE,SAAI;wBAAS,qBAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;;wBAA5C,GAAK,KAAK,GAAG,UAA+B,KAAI,IAAI,CAAC;;;;;KAEtD;IAEK,oCAAW,GAAjB;;;;;4BAEE,qBAAM,IAAI,CAAC,aAAa,EAAE;;wBAA1B,SAA0B,CAAC;wBAE3B,IAAK,CAAC,IAAI,CAAC,KAAK,EAAG;4BACjB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;4BACpC,sBAAO,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,EAAC;yBAC/B;wBAED,sBAAO,IAAI,OAAO,CAAW,iBAAO;gCAElC,IAAM,OAAO,GAAG,IAAI,gEAAW,CAAC;oCAC9B,SAAS,EAAE,KAAI,CAAC,KAAK;iCACtB,CAAC,CAAC;gCAEH,KAAI,CAAC,IAAI,CAAC,GAAG,CAAK,GAAG,WAAS,EAAE,EAAE,OAAO,WAAE,CAAC;qCACzC,SAAS,CAAE,cAAI;oCAEd,IAAK,IAAI,CAAC,IAAI,CAAC,EAAE;wCACf,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;wCAC/B,OAAO,CAAC,IAAI,CAAC,CAAC;qCACf;yCAAM;wCACL,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;wCACpC,OAAO,CAAC,KAAK,CAAC,CAAC;qCAChB;gCAEH,CAAC,CAAC,CAAC;4BAEP,CAAC,CAAC,EAAC;;;;KAEJ;IAED,yCAAgB,GAAhB,UAAkB,OAAgB;QAAlC,iBAsBC;QApBC,IAAM,OAAO,GAAG,IAAI,gEAAW,CAAC;YAC9B,SAAS,EAAE,IAAI,CAAC,KAAK;SACtB,CAAC,CAAC;QAEH,OAAO,IAAI,OAAO,CAAW,iBAAO;YAElC,KAAI,CAAC,IAAI,CAAC,IAAI,CAAK,GAAG,iBAAe,EAAE,OAAO,EAAE,EAAE,OAAO,WAAE,CAAC;iBACzD,SAAS,CAAE,cAAI;gBAEd,IAAK,IAAI,CAAC,IAAI,CAAC,EAAG;oBAChB,KAAI,CAAC,YAAY,CAAE,IAAI,CAAC,OAAO,CAAC,CAAE,CAAC;oBACnC,OAAO,CAAC,IAAI,CAAC,CAAC;iBACf;qBAAM;oBACL,OAAO,CAAC,KAAK,CAAC,CAAC;iBAChB;YAEH,CAAC,CAAC,CAAC;QAEP,CAAC,CAAC,CAAC;IAEL,CAAC;;gBAzI0B,+DAAU;gBAAmB,sDAAO;gBAAmB,4DAAa;;IALpF,cAAc;QAH1B,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;+EAM2B,+DAAU,EAAmB,sDAAO,EAAmB,4DAAa;OALpF,cAAc,CA+I1B;IAAD,qBAAC;CAAA;AA/I0B","file":"pages-login-login-module-es5.js","sourcesContent":["module.exports = \"<ion-content color=\\\"dark\\\">\\n\\n\\n  <ion-slides class=\\\"mainSlide\\\" #slidePrincipal [options]=\\\"slidesOpts\\\">\\n\\n      <ion-slide>\\n\\n          <form (ngSubmit)=\\\"login( fLogin )\\\" #fLogin=\\\"ngForm\\\">\\n              <ion-grid fixed>\\n\\n                  <ion-row>\\n                      <ion-col>\\n                          <img src=\\\"/assets/avatars/av-2.png\\\">\\n                      </ion-col>\\n                  </ion-row>\\n\\n                  <ion-row>\\n                      <ion-col>\\n\\n                          <ion-list no-padding color=\\\"dark\\\">\\n\\n                              <ion-item color=\\\"dark\\\">\\n                                  <ion-label>Email</ion-label>\\n                                  <ion-input name=\\\"email\\\" type=\\\"email\\\" [(ngModel)]=\\\"loginUser.email\\\" required>\\n                                  </ion-input>\\n                              </ion-item>\\n\\n                              <ion-item color=\\\"dark\\\">\\n                                  <ion-label>Senha</ion-label>\\n                                  <ion-input name=\\\"password\\\" type=\\\"password\\\" [(ngModel)]=\\\"loginUser.password\\\"\\n                                      required></ion-input>\\n                              </ion-item>\\n\\n                          </ion-list>\\n                      </ion-col>\\n                  </ion-row>\\n\\n                  <ion-row>\\n                      <ion-col>\\n                          <ion-button type=\\\"submit\\\" color=\\\"success\\\" shape=\\\"round\\\" (click)=\\\"logar()\\\">\\n                              Login\\n                          </ion-button>\\n                      </ion-col>\\n                  </ion-row>\\n\\n              </ion-grid>\\n          </form>\\n\\n\\n\\n      </ion-slide>\\n\\n      <ion-slide>\\n\\n\\n          <ion-grid fixed>\\n\\n              <!-- Avatar Selector -->\\n              <app-avatar-selector (avatarSel)=\\\"registerUser.avatar = $event\\\"></app-avatar-selector>\\n\\n              <form (ngSubmit)=\\\"registro( fRegistro )\\\" #fRegistro=\\\"ngForm\\\">\\n                  <ion-row>\\n                      <ion-col>\\n\\n                          <ion-list>\\n\\n                              <ion-item>\\n                                  <ion-label>Email</ion-label>\\n                                  <ion-input name=\\\"email\\\" type=\\\"email\\\" [(ngModel)]=\\\"registerUser.email\\\" required>\\n                                  </ion-input>\\n                              </ion-item>\\n\\n                              <ion-item>\\n                                  <ion-label>Nome</ion-label>\\n                                  <ion-input name=\\\"nombre\\\" type=\\\"text\\\" [(ngModel)]=\\\"registerUser.name\\\" required>\\n                                  </ion-input>\\n                              </ion-item>\\n\\n                              <ion-item>\\n                                  <ion-label>Senha</ion-label>\\n                                  <ion-input name=\\\"password\\\" type=\\\"password\\\" [(ngModel)]=\\\"registerUser.password\\\"\\n                                      required></ion-input>\\n                              </ion-item>\\n\\n                          </ion-list>\\n                      </ion-col>\\n                  </ion-row>\\n\\n                  <ion-row>\\n                      <ion-col>\\n                          <ion-button type=\\\"submit\\\" color=\\\"tertiary\\\" shape=\\\"round\\\">\\n                              Criar usuario\\n                          </ion-button>\\n                      </ion-col>\\n                  </ion-row>\\n\\n              </form>\\n          </ion-grid>\\n\\n\\n      </ion-slide>\\n\\n\\n  </ion-slides>\\n\\n\\n\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPage } from './login.page';\nimport { ComponentsModule } from '../../components/components.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","module.exports = \".mainSlide, .mainSlide ion-slide {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\nimg {\\n  width: 120px;\\n}\\n\\n.pick-avatar {\\n  width: 80px;\\n  opacity: 0.3;\\n}\\n\\n.pick-avatar-seleccionado {\\n  -webkit-transition: opacity 0.5s linear;\\n  transition: opacity 0.5s linear;\\n  opacity: 1 !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vQzpcXFVzZXJzXFxlbGlzZXVcXERlc2t0b3BcXDEwLWV4cHJlc3Mvc3JjXFxhcHBcXHBhZ2VzXFxsb2dpblxcbG9naW4ucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtBQ0NKOztBREVBO0VBQ0ksWUFBQTtBQ0NKOztBREVBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7QUNDSjs7QURFQTtFQUNJLHVDQUFBO0VBQUEsK0JBQUE7RUFDQSxxQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1haW5TbGlkZSwgLm1haW5TbGlkZSBpb24tc2xpZGUge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbmltZyB7XHJcbiAgICB3aWR0aDogMTIwcHg7XHJcbn1cclxuXHJcbi5waWNrLWF2YXRhciB7XHJcbiAgICB3aWR0aDogODBweDtcclxuICAgIG9wYWNpdHk6IDAuMztcclxufVxyXG5cclxuLnBpY2stYXZhdGFyLXNlbGVjY2lvbmFkbyB7XHJcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXMgbGluZWFyO1xyXG4gICAgb3BhY2l0eTogMSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4iLCIubWFpblNsaWRlLCAubWFpblNsaWRlIGlvbi1zbGlkZSB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbmltZyB7XG4gIHdpZHRoOiAxMjBweDtcbn1cblxuLnBpY2stYXZhdGFyIHtcbiAgd2lkdGg6IDgwcHg7XG4gIG9wYWNpdHk6IDAuMztcbn1cblxuLnBpY2stYXZhdGFyLXNlbGVjY2lvbmFkbyB7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBsaW5lYXI7XG4gIG9wYWNpdHk6IDEgIWltcG9ydGFudDtcbn0iXX0= */\"","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { IonSlides, NavController } from '@ionic/angular';\nimport { NgForm } from '@angular/forms';\nimport { UsuarioService } from '../../services/usuario.service';\nimport { UiServiceService } from '../../services/ui-service.service';\nimport { Usuario } from '../../interfaces/usuarios';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n  @ViewChild('slidePrincipal', {static: false}) slides: IonSlides;\n\n\n  loginUser = {\n    email: 'test@test.com',\n    password: '7654321'\n  };\n\n  registerUser: Usuario = {\n    email: 'test',\n    password: '7654321',\n    name: 'Test',\n    avatar: 'av-1.png'\n  };\n  \n  slidesOpts: any = {allowTouchMove: false};\n\n  LockSwipes( lock: boolean ) {\n    if(lock === true) {\n      this.slidesOpts = {allowTouchMove: true};\n    } else {\n      this.slidesOpts = {allowTouchMove: false};\n    }\n  }\n\n  constructor( private usuarioService: UsuarioService, \n               private navCtrl: NavController,\n               private uiService: UiServiceService ) { }\n  \n\n  ngOnInit() {\n    \n  }\n\n  logar() {\n    this.navCtrl.navigateRoot('main/tabs/tab2', {animated: true});\n  }\n\n\n  async login( fLogin: NgForm ) {\n\n    if ( fLogin.invalid ) { return; }\n\n    const valido = await this.usuarioService.login( this.loginUser.email, this.loginUser.password );\n    \n    if ( valido ) {\n      // Navegar para tabs\n      this.navCtrl.navigateRoot( '/main/tabs/tab1', { animated: true } );\n    } else {\n      // Alerta de usuario e contrasenha incorretos.\n      this.uiService.alertaInformativo('Usuário e contra/senha não são corretos.'); \n    }\n\n  }\n\n  async registro( fRegistro: NgForm ) {\n\n    if ( fRegistro.invalid ) { return; }\n\n    const valido = await this.usuarioService.registro( this.registerUser );\n\n    if ( valido ) {\n      // Navegar para tabs\n      this.navCtrl.navigateRoot( '/main/tabs/tab1', { animated: true } );\n    } else {\n      // Alerta de usuario e contrasenha incorretos.\n      this.uiService.alertaInformativo('Este email já existe.'); \n    }\n\n  }\n\n  \n\n  mostrarRegistro() {\n    this.slidesOpts = {allowTouchMove: true};\n    this.slides.slideTo(0);\n  }\n  \n  mostrarLogin() {\n    this.slidesOpts = {allowTouchMove: true};\n    this.slides.slideTo(1);\n    \n}\n\n}","import { Injectable } from '@angular/core';\nimport { AlertController, ToastController } from '@ionic/angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UiServiceService {\n\n  constructor( private alertController: AlertController, private toastController: ToastController ) { }\n\n  async alertaInformativo( message: string ) {\n    const alert = await this.alertController.create({\n      message,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n  async presentToast( message: string ) {\n    const toast = await this.toastController.create({\n      message,\n      position: 'top',\n      duration: 1500\n    });\n    toast.present();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\nimport { environment } from '../../environments/environment';\n\nimport { NavController } from '@ionic/angular';\nimport { Usuario } from '../interfaces/usuarios';\nimport { Storage } from '@ionic/storage';\n\n\nconst URL = environment.url;\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UsuarioService {\n\n  token: string = null;\n  private usuario: Usuario = {};\n\n  constructor( private http: HttpClient, private storage: Storage, private navCtrl: NavController  ) { }\n\n  login( email: string, password: string ) {\n\n    const data = { email, password };\n\n    return new Promise( resolve =>{\n\n      this.http.post(`${ URL }/user/login`, data)\n        .subscribe( async resp => {\n          console.log(resp);\n  \n          if ( resp['ok'] ) {\n            await this.guardarToken( resp['token'] );\n            resolve(true);\n          } else {\n            this.token = null;\n            this.storage.clear();\n            resolve(false);\n          }\n  \n        });\n\n    });\n\n  }\n\n  logout() {\n    this.token   = null;\n    this.usuario = null;\n    this.storage.clear();\n    this.navCtrl.navigateRoot('/login', { animated: true });\n  }\n\n  registro( usuario: Usuario ) {\n\n    return new Promise( resolve =>{\n\n      this.http.post(`${ URL }/user/create`, usuario)\n        .subscribe( async resp =>{\n          \n          console.log(resp);\n\n          if ( resp['ok'] ) {\n            await this.guardarToken( resp['token'] );\n            resolve(true);\n          } else {\n            this.token = null;\n            this.storage.clear();\n            resolve(false);\n          }\n\n\n        });\n\n    });\n  }\n\n  getUsuario() {\n\n    if ( !this.usuario._id ) {\n      this.validaToken();\n    }\n\n    return { ...this.usuario };\n\n  }\n\n  async guardarToken( token: string ) {\n    \n    this.token = token;\n    await this.storage.set('token', token);\n\n    await this.validaToken();\n\n  }\n\n  async carregarToken() {\n\n    this.token = await this.storage.get('token') || null;\n\n  }\n\n  async validaToken(): Promise<boolean> {\n\n    await this.carregarToken();\n\n    if ( !this.token ) {\n      this.navCtrl.navigateRoot('/login');\n      return Promise.resolve(false);\n    }\n\n    return new Promise<boolean>( resolve =>{\n\n      const headers = new HttpHeaders({\n        'x-token': this.token\n      });\n\n      this.http.get(`${ URL }/user/`, { headers })\n        .subscribe( resp =>{\n\n          if ( resp['ok']) {\n            this.usuario = resp['usuario'];\n            resolve(true);\n          } else {\n            this.navCtrl.navigateRoot('/login');\n            resolve(false);\n          }\n\n        });\n\n    });\n\n  }\n\n  atualizarUsuario( usuario: Usuario ) {\n\n    const headers = new HttpHeaders({\n      'x-token': this.token\n    });\n\n    return new Promise<boolean>( resolve => {\n\n      this.http.post(`${ URL }/user/update`, usuario, { headers })\n        .subscribe( resp => {\n  \n          if ( resp['ok'] ) {\n            this.guardarToken( resp['token'] );\n            resolve(true);\n          } else {\n            resolve(false);\n          }\n\n        });\n\n    });\n\n  }\n}\n"],"sourceRoot":""}