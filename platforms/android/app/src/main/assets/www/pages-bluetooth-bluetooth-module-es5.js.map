{"version":3,"sources":["./src/app/pages/bluetooth/bluetooth.page.html","./src/app/pages/bluetooth/bluetooth.module.ts","./src/app/pages/bluetooth/bluetooth.page.scss","./src/app/pages/bluetooth/bluetooth.page.ts"],"names":[],"mappings":"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","file":"pages-bluetooth-bluetooth-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n    <ion-toolbar color=\\\"dark\\\">\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button defaultHref=\\\"/\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>Bluetooth</ion-title>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding>\\r\\n    <ion-button full color=\\\"success\\\" (click)=\\\"listPairedDevices()\\\">\\r\\n        <ion-icon name=\\\"refresh\\\"></ion-icon>&nbsp;Atualizar Dispositivos Bluetooth</ion-button>\\r\\n    <ion-row>\\r\\n        <ion-col>\\r\\n            <ion-list ngDefaultControl radio-group [(ngModel)]=\\\"pairedDeviceID\\\" *ngIf=\\\"listToggle\\\">\\r\\n                <ion-item *ngFor=\\\"let i of pairedList;let j=index\\\">\\r\\n                    <ion-label>{{i.name}}</ion-label>\\r\\n                    <ion-radio value=\\\"{{j}}\\\"></ion-radio>\\r\\n                </ion-item>\\r\\n            </ion-list>\\r\\n        </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-button full color=\\\"success\\\" *ngIf=\\\"listToggle\\\" (click)=\\\"selectDevice()\\\">\\r\\n        <ion-icon name=\\\"bluetooth\\\"></ion-icon>&nbsp;Conectar dispositivo Bluetooth</ion-button>\\r\\n    <ion-list>\\r\\n        <ion-item placeholder=\\\"Digite os dados que deseja enviar\\\">\\r\\n            <ion-textarea placeholder=\\\"Digite os dados que deseja enviar\\\"></ion-textarea>\\r\\n            <ion-input type=\\\"text\\\" name=\\\"datasend\\\" [(ngModel)]=\\\"dataSend\\\"></ion-input>\\r\\n        </ion-item>\\r\\n    </ion-list>\\r\\n    <ion-button color=\\\"success\\\" fill=\\\"outline\\\" (click)=\\\"sendData()\\\">\\r\\n        <ion-icon name=\\\"send\\\"></ion-icon>&nbsp;Enviar dados via Bluetooth\\r\\n    </ion-button>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { BluetoothPage } from './bluetooth.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: BluetoothPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [BluetoothPage]\r\n})\r\nexport class BluetoothPageModule {}\r\n","module.exports = \"page-bluetooth .submit-btn {\\n  color: #10dc60;\\n  background: rgba(0, 0, 0, 0);\\n  border-radius: 30px !important;\\n  border: 1px solid #FFF;\\n}\\npage-bluetooth .my-custom-class {\\n  --background: #f4f5f8;\\n  --spinner-color: #10dc60;\\n  color: #fff;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvYmx1ZXRvb3RoL0M6XFx0ZW1wXFx3cy1pb25pY1xcWEV4cHJlc3NBcHAvc3JjXFxhcHBcXHBhZ2VzXFxibHVldG9vdGhcXGJsdWV0b290aC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2JsdWV0b290aC9ibHVldG9vdGgucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksY0FBQTtFQUNBLDRCQUFBO0VBQ0EsOEJBQUE7RUFDQSxzQkFBQTtBQ0FSO0FERUk7RUFDSSxxQkFBQTtFQUNBLHdCQUFBO0VBQ0EsV0FBQTtBQ0FSIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvYmx1ZXRvb3RoL2JsdWV0b290aC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJwYWdlLWJsdWV0b290aCB7XHJcbiAgICAuc3VibWl0LWJ0biB7XHJcbiAgICAgICAgY29sb3I6ICMxMGRjNjA7XHJcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwKTtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiAzMHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI0ZGRjtcclxuICAgIH1cclxuICAgIC5teS1jdXN0b20tY2xhc3Mge1xyXG4gICAgICAgIC0tYmFja2dyb3VuZDogI2Y0ZjVmODtcclxuICAgICAgICAtLXNwaW5uZXItY29sb3I6ICMxMGRjNjA7XHJcbiAgICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICB9XHJcbn0iLCJwYWdlLWJsdWV0b290aCAuc3VibWl0LWJ0biB7XG4gIGNvbG9yOiAjMTBkYzYwO1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDApO1xuICBib3JkZXItcmFkaXVzOiAzMHB4ICFpbXBvcnRhbnQ7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNGRkY7XG59XG5wYWdlLWJsdWV0b290aCAubXktY3VzdG9tLWNsYXNzIHtcbiAgLS1iYWNrZ3JvdW5kOiAjZjRmNWY4O1xuICAtLXNwaW5uZXItY29sb3I6ICMxMGRjNjA7XG4gIGNvbG9yOiAjZmZmO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { NavController, AlertController, ToastController, LoadingController } from '@ionic/angular';\r\nimport { BluetoothSerial } from '@ionic-native/bluetooth-serial/ngx';\r\n\r\n\r\n@Component({\r\n  selector: 'app-bluetooth',\r\n  templateUrl: './bluetooth.page.html',\r\n  styleUrls: ['./bluetooth.page.scss'],\r\n})\r\nexport class BluetoothPage implements OnInit {\r\n  pairedList: pairedlist;\r\n  listToggle: boolean = false;\r\n  pairedDeviceID: number = 0;\r\n  dataSend: string = \"\";\r\n\r\n  constructor(public navCtrl: NavController, private alertCtrl: AlertController, public loadingController: LoadingController,\r\n              private bluetoothSerial: BluetoothSerial, private toastCtrl: ToastController) {\r\n    this.checkBluetoothEnabled();\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      cssClass: 'loadingClass',\r\n      message: 'Por favor aguarde...',\r\n      animated: true,\r\n      spinner: 'circles',\r\n      translucent: true\r\n    });\r\n    loading.present();\r\n    return loading;\r\n    //const { role, data } = await loading.onDidDismiss();\r\n  }\r\n\r\n  checkBluetoothEnabled() {\r\n    this.bluetoothSerial.isEnabled().then(success => {\r\n      this.listPairedDevices();\r\n    }, error => {\r\n      this.showError(\"Habilite o Bluetooth\")\r\n    });\r\n  }\r\n\r\n  async listPairedDevices() {\r\n    let loading = await this.presentLoading();\r\n    this.bluetoothSerial.list().then(success => {\r\n      this.pairedList = success;\r\n      this.listToggle = true;\r\n      loading.dismiss();\r\n    }, error => {\r\n      this.showError(\"Habilite o Bluetooth\")\r\n      this.listToggle = false;\r\n      loading.dismiss();\r\n    });\r\n  }\r\n\r\n  selectDevice() {\r\n    let connectedDevice = this.pairedList[this.pairedDeviceID];\r\n    if (!connectedDevice.address) {\r\n      this.showError('Selecione o dispositivo pareado para conectar');\r\n      return;\r\n    }\r\n    let address = connectedDevice.address;\r\n    let name = connectedDevice.name;\r\n    console.log('Adress: ', address);\r\n    this.connect(address);\r\n  }\r\n\r\n  async connect(address) {\r\n    let loading = await this.presentLoading();\r\n    // Attempt to connect device with specified address, call app.deviceConnected if success\r\n    this.bluetoothSerial.connect(address).subscribe(success => {\r\n      this.deviceConnected();\r\n      loading.dismiss();\r\n      this.showToast(\"Dispositivo conectado!\");\r\n    }, error => {\r\n      loading.dismiss();\r\n      this.showError(\"Erro: Conecte o dispositivo\");\r\n    });\r\n  }\r\n\r\n  deviceConnected() {\r\n    // Subscribe to data receiving as soon as the delimiter is read\r\n    this.bluetoothSerial.subscribe('\\n').subscribe(success => {\r\n      this.handleData(success);\r\n      this.showToast(\"Conexão bem sucedida\");\r\n    }, error => {\r\n      this.showError(error);\r\n    });\r\n  }\r\n\r\n  deviceDisconnected() {\r\n    // Unsubscribe from data receiving\r\n    this.bluetoothSerial.disconnect();\r\n    this.showToast(\"Dispositivo Desconectado\");\r\n  }\r\n\r\n  handleData(data) {\r\n    this.showToast(data);\r\n  }\r\n\r\n  sendData() {\r\n    this.dataSend+='\\n';\r\n    this.showToast(this.dataSend);\r\n\r\n    this.bluetoothSerial.write(this.dataSend).then(success => {\r\n      this.showToast(success);\r\n    }, error => {\r\n      this.showError(error)\r\n    });\r\n  }\r\n\r\n  async showError(error) {\r\n    const alert = await this.alertCtrl.create({\r\n      header: 'Error',\r\n      subHeader: error,\r\n      buttons: ['Ok']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  async showToast(msj) {\r\n    const toast = await this.toastCtrl.create({\r\n      message: msj,\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}\r\n\r\ninterface pairedlist {\r\n  \"class\": number,\r\n  \"id\": string,\r\n  \"address\": string,\r\n  \"name\": string\r\n}\r\n"],"sourceRoot":""}